{"mappings":"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","sources":["<anon>","src/js/marketplace.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire75f2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire75f2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"epNRB\", function(module, exports) {\n\n\nvar $h6ark = parcelRequire(\"h6ark\");\n\nvar $k4QTz = parcelRequire(\"k4QTz\");\nlet HAS_MARKETPLACE_BEEN_RENDERED = false;\nconst MARKETPLACE_URL = \"https://raw.githubusercontent.com/Eth0s-Group/Z2-Marketplace/main/market.json\";\nconst APP_REPO = document.querySelector(\"#app_repo\");\nconst MODAL_BODY = APP_REPO.querySelector(\".modal-body\");\nfunction proxy(url) {\n    return `https://z2-liberator-cors-proxy.eth0s.dev/corsproxy/?apiurl=${encodeURIComponent(url)}`;\n}\ndocument.querySelector(\"#app_repo_launcher\").addEventListener(\"click\", ()=>{\n    if (!HAS_MARKETPLACE_BEEN_RENDERED) render_marketplace();\n    new $k4QTz.Modal(document.querySelector(\"#app_repo\")).show();\n});\ndocument.querySelector(\"#refresh_repo\").addEventListener(\"click\", render_marketplace);\nasync function installer(btn) {\n    btn.setAttribute(\"disabled\", \"true\");\n    btn.textContent = \"Installing dependencies...\";\n    const dependencies = eval(btn.getAttribute(\"data-deps\")) || [];\n    console.log(dependencies);\n    for (const dep of dependencies){\n        console.log(dep);\n        await installer(document.getElementById(\"install_\" + dep));\n    }\n    btn.textContent = \"Downloading...\";\n    let blobby = null;\n    try {\n        blobby = await (await fetch(proxy(btn.getAttribute(\"data-url\")))).blob();\n    } catch (e) {\n        console.error(e);\n        btn.textContent = \"Error downloading :(\";\n        return;\n    }\n    btn.textContent = \"Installing app...\";\n    try {\n        await (0, $h6ark.install_app)(blobby);\n    } catch (e) {\n        console.error(e);\n        btn.textContent = \"Error installing :(\";\n        return;\n    }\n    btn.textContent = \"Installed!\";\n}\nasync function render_marketplace() {\n    const mkt_resp = await (await fetch(MARKETPLACE_URL)).json();\n    APP_REPO.querySelector(\".modal-header\").querySelector(\"h1\").textContent = mkt_resp.name;\n    MODAL_BODY.innerHTML = \"\";\n    APP_REPO.querySelector(\".modal-dialog\").style.maxWidth = \"100%\";\n    for (const app_id of Object.keys(mkt_resp.apps)){\n        const app = mkt_resp.apps[app_id];\n        const tile = document.createElement(\"div\");\n        tile.style.borderBottom = \"medium solid gray\";\n        tile.style.marginBottom = \"22px\";\n        const left_half = document.createElement(\"div\");\n        const right_half = document.createElement(\"div\");\n        const img = document.createElement(\"img\");\n        img.src = app.icon;\n        img.style.height = \"32px\";\n        img.style.width = \"32px\";\n        left_half.appendChild(img);\n        const install_btn = document.createElement(\"button\");\n        install_btn.classList.add(\"btn\", \"btn-primary\");\n        install_btn.id = \"install_\" + app_id;\n        install_btn.setAttribute(\"data-id\", app_id);\n        install_btn.setAttribute(\"data-url\", app.downloadUrl);\n        install_btn.setAttribute(\"data-deps\", JSON.stringify(app.dependencies));\n        install_btn.addEventListener(\"click\", ()=>{\n            installer(install_btn);\n        });\n        install_btn.textContent = \"Install\";\n        left_half.appendChild(install_btn);\n        tile.appendChild(left_half);\n        const title = document.createElement(\"h3\");\n        title.textContent = app.name;\n        right_half.appendChild(title);\n        const desc = document.createElement(\"pre\");\n        desc.textContent = app.description;\n        right_half.appendChild(desc);\n        const attrib = document.createElement(\"a\");\n        attrib.textContent = app.attribution.name;\n        attrib.href = app.attribution.link;\n        attrib.target = \"_blank\";\n        right_half.appendChild(attrib);\n        tile.appendChild(right_half);\n        MODAL_BODY.appendChild(tile);\n    }\n    HAS_MARKETPLACE_BEEN_RENDERED = true;\n}\n\n});\n\n\nparcelRequire(\"epNRB\");\n\n//# sourceMappingURL=index.e733a803.js.map\n","import { left } from \"@popperjs/core\";\nimport { install_app } from \"./common\";\nimport * as bootstrap from \"bootstrap\";\n\n\nlet HAS_MARKETPLACE_BEEN_RENDERED = false;\nconst MARKETPLACE_URL = \"https://raw.githubusercontent.com/Eth0s-Group/Z2-Marketplace/main/market.json\";\nconst APP_REPO = document.querySelector(\"#app_repo\");\nconst MODAL_BODY = APP_REPO.querySelector(\".modal-body\");\n\nfunction proxy(url){\n    return `https://z2-liberator-cors-proxy.eth0s.dev/corsproxy/?apiurl=${encodeURIComponent(url)}`\n}\n\ndocument.querySelector(\"#app_repo_launcher\").addEventListener(\"click\", () => {\n    if (!HAS_MARKETPLACE_BEEN_RENDERED) {\n        render_marketplace()\n    }\n    new bootstrap.Modal(document.querySelector(\"#app_repo\")).show()\n});\n\ndocument.querySelector(\"#refresh_repo\").addEventListener(\"click\", render_marketplace);\n\nasync function installer(btn) {\n    btn.setAttribute(\"disabled\", \"true\")\n    btn.textContent = \"Installing dependencies...\";\n    const dependencies = eval(btn.getAttribute(\"data-deps\")) || [];\n    console.log(dependencies);\n    for (const dep of dependencies) {\n        console.log(dep);\n        await installer(document.getElementById(\"install_\" + dep));\n    }\n    btn.textContent = \"Downloading...\";\n    let blobby = null;\n    try {\n        blobby = await (await fetch(proxy(btn.getAttribute(\"data-url\")))).blob();\n    } catch (e) {\n        console.error(e);\n        btn.textContent = \"Error downloading :(\";\n        return;\n    }\n    btn.textContent = \"Installing app...\"\n    try {\n        await install_app(blobby);\n    } catch (e) {\n        console.error(e);\n        btn.textContent = \"Error installing :(\";\n        return;\n    }\n    btn.textContent = \"Installed!\"\n}\n\nasync function render_marketplace(){\n    const mkt_resp = await ( await fetch(MARKETPLACE_URL) ).json()\n    APP_REPO.querySelector(\".modal-header\").querySelector(\"h1\").textContent = mkt_resp.name;\n    MODAL_BODY.innerHTML = \"\";\n    APP_REPO.querySelector(\".modal-dialog\").style.maxWidth = \"100%\";\n    for (const app_id of Object.keys(mkt_resp.apps)) {\n        const app = mkt_resp.apps[app_id];\n        const tile = document.createElement(\"div\");\n        tile.style.borderBottom = \"medium solid gray\";\n        tile.style.marginBottom = \"22px\";\n        const left_half = document.createElement(\"div\");\n        \n        const right_half = document.createElement(\"div\");\n        const img = document.createElement(\"img\");\n        img.src = app.icon;\n        img.style.height = \"32px\";\n        img.style.width = \"32px\";\n        left_half.appendChild(img);\n        const install_btn = document.createElement(\"button\");\n        install_btn.classList.add(\"btn\", \"btn-primary\");\n        install_btn.id = \"install_\" + app_id;\n        install_btn.setAttribute(\"data-id\", app_id);\n        install_btn.setAttribute(\"data-url\", app.downloadUrl);\n        install_btn.setAttribute(\"data-deps\", JSON.stringify(app.dependencies));\n        install_btn.addEventListener(\"click\", () => {\n            installer(install_btn);\n        });\n        install_btn.textContent = \"Install\";\n        left_half.appendChild(install_btn);\n        tile.appendChild(left_half);\n        const title = document.createElement(\"h3\");\n        title.textContent = app.name;\n        right_half.appendChild(title);\n        const desc = document.createElement(\"pre\");\n        desc.textContent = app.description;\n        right_half.appendChild(desc);\n        const attrib = document.createElement(\"a\");\n        attrib.textContent = app.attribution.name;\n        attrib.href = app.attribution.link;\n        attrib.target = \"_blank\";\n        right_half.appendChild(attrib);\n        tile.appendChild(right_half);\n        MODAL_BODY.appendChild(tile);\n    }\n    HAS_MARKETPLACE_BEEN_RENDERED = true;\n}"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$h6ark","$k4QTz","HAS_MARKETPLACE_BEEN_RENDERED","MARKETPLACE_URL","APP_REPO","document","querySelector","MODAL_BODY","proxy","url","encodeURIComponent","installer","btn","setAttribute","textContent","dependencies","eval","getAttribute","dep","console","log","getElementById","blobby","fetch","blob","e","error","install_app","render_marketplace","mkt_resp","json","app_id","name","innerHTML","style","maxWidth","Object","keys","apps","app","tile","createElement","borderBottom","marginBottom","left_half","right_half","img","src","icon","height","width","appendChild","install_btn","classList","add","downloadUrl","JSON","stringify","addEventListener","title","desc","description","attrib","attribution","href","link","target","Modal","show"],"version":3,"file":"index.e733a803.js.map"}