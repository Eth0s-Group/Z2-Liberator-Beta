var $parcel$global=globalThis,$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire75f2;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire75f2=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("epNRB",function(module,exports){var $h6ark=parcelRequire("h6ark"),$k4QTz=parcelRequire("k4QTz");let HAS_MARKETPLACE_BEEN_RENDERED=!1,MARKETPLACE_URL="https://raw.githubusercontent.com/Eth0s-Group/Z2-Marketplace/main/market.json",APP_REPO=document.querySelector("#app_repo"),MODAL_BODY=APP_REPO.querySelector(".modal-body");function proxy(e){return`https://z2-liberator-cors-proxy.eth0s.dev/corsproxy/?apiurl=${encodeURIComponent(e)}`}async function installer(btn){btn.setAttribute("disabled","true"),btn.textContent="Installing dependencies...";let dependencies=eval(btn.getAttribute("data-deps"))||[];for(let dep of(console.log(dependencies),dependencies))console.log(dep),await installer(document.getElementById("install_"+dep));btn.textContent="Downloading...";let blobby=null;try{blobby=await (await fetch(proxy(btn.getAttribute("data-url")))).blob()}catch(e){console.error(e),btn.textContent="Error downloading :(";return}btn.textContent="Installing app...";try{await (0,$h6ark.install_app)(blobby)}catch(e){console.error(e),btn.textContent="Error installing :(";return}btn.textContent="Installed!"}async function render_marketplace(){let e=await (await fetch(MARKETPLACE_URL)).json();for(let t of(APP_REPO.querySelector(".modal-header").querySelector("h1").textContent=e.name,MODAL_BODY.innerHTML="",APP_REPO.querySelector(".modal-dialog").style.maxWidth="100%",Object.keys(e.apps))){let n=e.apps[t],r=document.createElement("div");r.style.borderBottom="medium solid gray",r.style.marginBottom="22px";let o=document.createElement("div"),a=document.createElement("div"),l=document.createElement("img");l.src=n.icon,l.style.height="32px",l.style.width="32px",o.appendChild(l);let i=document.createElement("button");i.classList.add("btn","btn-primary"),i.id="install_"+t,i.setAttribute("data-id",t),i.setAttribute("data-url",n.downloadUrl),i.setAttribute("data-deps",JSON.stringify(n.dependencies)),i.addEventListener("click",()=>{installer(i)}),i.textContent="Install",o.appendChild(i),r.appendChild(o);let d=document.createElement("h3");d.textContent=n.name,a.appendChild(d);let c=document.createElement("pre");c.textContent=n.description,a.appendChild(c);let p=document.createElement("a");p.textContent=n.attribution.name,p.href=n.attribution.link,p.target="_blank",a.appendChild(p),r.appendChild(a),MODAL_BODY.appendChild(r)}HAS_MARKETPLACE_BEEN_RENDERED=!0}document.querySelector("#app_repo_launcher").addEventListener("click",()=>{HAS_MARKETPLACE_BEEN_RENDERED||render_marketplace(),new $k4QTz.Modal(document.querySelector("#app_repo")).show()}),document.querySelector("#refresh_repo").addEventListener("click",render_marketplace)}),parcelRequire("epNRB");
//# sourceMappingURL=index.e733a803.js.map
